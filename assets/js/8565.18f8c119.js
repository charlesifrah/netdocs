"use strict";(self.webpackChunkdyte_docs=self.webpackChunkdyte_docs||[]).push([["8565"],{14311:function(i,t,e){e.r(t),e.d(t,{dyte_participant:function(){return l}});var n=e(84982),a=e(48724),s=e(83041),c=e(96632),o=e(60383),d=e(39415);e(79598);var h=e(71783),r=e(81479);e(78410),e(51943);var p=e(17775);e(94098);let l=class{constructor(i){(0,n.r)(this,i),this.dyteSendNotification=(0,n.c)(this,"dyteSendNotification",7),this.pinnedListener=({isPinned:i})=>{this.isPinned=i},this.stageListener=({stageStatus:i})=>{this.isOnStage="ON_STAGE"===i},this.inviteToStageToggle=async()=>{let i=this.participant,{stage:t}=this.meeting;if("ACCEPTED_TO_JOIN_STAGE"===i.stageStatus){this.dyteSendNotification.emit({message:`${i.name} ${this.t("stage.invited_notification")}`,trace:`join-stage-${i.id}`});return}this.isOnStage?(i.isPinned&&i.unpin(),await t.kick([i.userId])):(await t.grantAccess([i.userId]),this.dyteSendNotification.emit({message:`${i.name} ${this.t("stage.invited_notification")}`,trace:`join-stage-invite-${i.id}`})),this.isOnStage="ON_STAGE"===i.stageStatus},this.handleOutsideClick=()=>{!this.clickedThis&&this.menuOpen&&(this.menuOpen=!1),this.clickedThis=!1},this.clickedThis=!1,this.update=()=>{let i=this.host.shadowRoot.getElementById("trigger"),t=this.host.shadowRoot.getElementById("menu-list");(0,p.c)(i,t,{placement:"bottom-end",middleware:[(0,p.o)(10),(0,p.f)(),(0,p.s)({padding:5})]}).then(({x:i,y:e})=>{Object.assign(t.style,{right:`${i}px`,top:`${e}px`})})},this.onMenuToggle=()=>{this.clickedThis=!0,this.menuOpen=!this.menuOpen,this.menuOpen&&this.update()},this.meeting=void 0,this.view="sidebar",this.participant=void 0,this.iconPack=a.d,this.t=(0,s.u)(),this.config=h.d,this.audioEnabled=!1,this.videoEnabled=!1,this.isPinned=!1,this.isOnStage=!1,this.canDisableParticipantAudio=!1,this.canDisableParticipantVideo=!1,this.canKickParticipant=!1,this.canPinParticipant=!1,this.canAllowParticipantOnStage=!1,this.menuOpen=!1}connectedCallback(){this.meetingChanged(this.meeting),this.participantChanged(this.participant)}disconnectedCallback(){document.removeEventListener("click",this.handleOutsideClick),null!=this.participant&&void 0!=this.participant.removeListener&&(this.audioUpdateListener&&this.participant.removeListener("audioUpdate",this.audioUpdateListener),this.videoUpdateListener&&this.participant.removeListener("videoUpdate",this.videoUpdateListener),this.participant.removeListener("pinned",this.pinnedListener),this.participant.removeListener("unpinned",this.pinnedListener),this.participant.removeListener("stageStatusUpdate",this.stageListener))}meetingChanged(i){var t,e,n,a,s,c,o;if(null!=i){let{self:d}=i;this.canDisableParticipantAudio=d.permissions.canAllowParticipantAudio||d.permissions.canDisableParticipantAudio,this.canDisableParticipantVideo=d.permissions.canAllowParticipantVideo||d.permissions.canDisableParticipantVideo,this.canKickParticipant=d.permissions.kickParticipant&&(null===(t=this.meeting)||void 0===t?void 0:t.__internals__.features.hasFeature(r.F.DISABLE_KICKING))!==!0&&((null===(e=this.meeting)||void 0===e?void 0:e.__internals__.features.hasFeature(r.F.ADMIN_CANTREMOVE_ADMIN))!==!0||(null===(n=this.participant)||void 0===n?void 0:n.presetName)!=="webinar_admin"),this.canPinParticipant=d.permissions.pinParticipant,this.canAllowParticipantOnStage=d.permissions.acceptStageRequests&&d.permissions.stageEnabled&&((null===(a=this.meeting)||void 0===a?void 0:a.__internals__.features.hasFeature(r.F.ADMIN_CANTREMOVE_ADMIN))!==!0||(null===(s=this.participant)||void 0===s?void 0:s.presetName)!=="webinar_admin")&&((null===(c=this.meeting)||void 0===c?void 0:c.__internals__.features.hasFeature(r.F.CANTINVITE_VIEWER))!==!0||(null===(o=this.participant)||void 0===o?void 0:o.presetName)!=="webinar_viewer")}}participantChanged(i){null!=i&&(this.audioEnabled=i.audioEnabled,this.videoEnabled=i.videoEnabled,this.isPinned=i.isPinned,this.isOnStage="ON_STAGE"===i.stageStatus,this.audioUpdateListener=({audioEnabled:i})=>{this.audioEnabled=i},this.videoUpdateListener=({videoEnabled:i})=>{this.videoEnabled=i},void 0!=i.addListener&&(i.addListener("audioUpdate",this.audioUpdateListener),i.addListener("videoUpdate",this.videoUpdateListener),i.addListener("pinned",this.pinnedListener),i.addListener("unpinned",this.pinnedListener),i.addListener("stageStatusUpdate",this.stageListener)))}componentDidLoad(){document.addEventListener("click",this.handleOutsideClick)}render(){var i,t,e,a,s,h,r,p;let l=(null===(i=this.meeting)||void 0===i?void 0:i.meta.viewType)==="AUDIO_ROOM",u=(null===(t=this.meeting)||void 0===t?void 0:t.self.id)===this.participant.id,g=this.canDisableParticipantAudio&&this.audioEnabled||this.canDisableParticipantVideo&&this.videoEnabled&&!l||this.canKickParticipant||this.canPinParticipant&&this.isOnStage||this.canAllowParticipantOnStage,v=(0,o.f)((null===(e=this.participant)||void 0===e?void 0:e.name)||""),m=this.isOnStage||["GROUP_CALL","AUDIO_ROOM"].includes(null===(a=this.meeting)||void 0===a?void 0:a.meta.viewType),P={meeting:this.meeting,size:"sm",states:d.s,config:this.config,iconPack:this.iconPack,t:this.t};return(0,n.h)(n.H,null,(0,n.h)("div",{class:"left"},(0,n.h)("dyte-avatar",{participant:this.participant,size:"sm",iconPack:this.iconPack,t:this.t}),(0,n.h)("p",{class:"name",title:v},(0,o.s)(v,16)," ",(null===(s=this.meeting)||void 0===s?void 0:s.self.id)===(null===(h=this.participant)||void 0===h?void 0:h.id)&&this.t("(you)"))),"sidebar"===this.view&&(0,n.h)("div",{class:"right"},m&&(0,n.h)("dyte-icon",{class:{red:!this.audioEnabled},iconPack:this.iconPack,t:this.t,icon:this.audioEnabled?this.iconPack.mic_on:this.iconPack.mic_off}),m&&!l&&(0,n.h)("dyte-icon",{class:{red:!this.videoEnabled},iconPack:this.iconPack,t:this.t,icon:this.videoEnabled?this.iconPack.video_on:this.iconPack.video_off}),(g||(0,c.l)({element:"dyte-participant",defaults:P,childProps:{participant:this.participant}})>0)&&(0,n.h)("div",{class:"menu"},(0,n.h)("span",{id:"trigger",onClick:this.onMenuToggle},(0,n.h)("dyte-button",{variant:"ghost",kind:"icon",slot:"trigger",iconPack:this.iconPack,t:this.t},(0,n.h)("dyte-icon",{class:"more",icon:this.iconPack.more_vertical}))),(0,n.h)("span",{id:"menu-list"},this.menuOpen&&(0,n.h)("dyte-menu-list",{iconPack:this.iconPack,t:this.t},this.canPinParticipant&&m&&!l&&(0,n.h)("dyte-menu-item",{onClick:()=>{this.isPinned?this.participant.unpin():this.participant.pin()},iconPack:this.iconPack,t:this.t},(0,n.h)("dyte-icon",{icon:this.isPinned?this.iconPack.pin_off:this.iconPack.pin,slot:"start",iconPack:this.iconPack,t:this.t}),this.isPinned?this.t("unpin"):this.t("pin")),this.canDisableParticipantAudio&&m&&this.audioEnabled&&(0,n.h)("dyte-menu-item",{iconPack:this.iconPack,t:this.t,onClick:()=>{this.participant.disableAudio()}},(0,n.h)("dyte-icon",{icon:this.iconPack.mic_off,slot:"start"}),this.t("mute")),this.canDisableParticipantVideo&&m&&this.videoEnabled&&(0,n.h)("dyte-menu-item",{iconPack:this.iconPack,t:this.t,onClick:()=>{this.participant.disableVideo()}},(0,n.h)("dyte-icon",{icon:this.iconPack.video_off,slot:"start",iconPack:this.iconPack,t:this.t}),this.t("participants.turn_off_video")),this.canAllowParticipantOnStage&&(null===(r=this.participant)||void 0===r?void 0:r.id)!==(null===(p=this.meeting)||void 0===p?void 0:p.self.id)&&(0,n.h)("dyte-menu-item",{iconPack:this.iconPack,t:this.t,class:this.isOnStage?"red":"",onClick:this.inviteToStageToggle},(0,n.h)("dyte-icon",{iconPack:this.iconPack,t:this.t,icon:this.isOnStage?this.iconPack.leave_stage:this.iconPack.join_stage,slot:"start"}),this.isOnStage?this.t("stage.remove_from_stage"):this.t("stage.add_to_stage")),!u&&this.canKickParticipant&&(0,n.h)("dyte-menu-item",{iconPack:this.iconPack,t:this.t,class:"red",onClick:()=>{var i,t;null===(i=this.meeting)||void 0===i||i.participants.kick(null===(t=this.participant)||void 0===t?void 0:t.id)}},(0,n.h)("dyte-icon",{icon:this.iconPack.dismiss,slot:"start",iconPack:this.iconPack,t:this.t}),this.t("kick")),(0,n.h)("slot",null,(0,n.h)(c.R,{element:"dyte-participant",defaults:P,childProps:{participant:this.participant},deepProps:!0,onlyChildren:!0})))))))}get host(){return(0,n.a)(this)}static get watchers(){return{meeting:["meetingChanged"],participant:["participantChanged"]}}};l.style=":host{line-height:initial;font-family:var(--dyte-font-family, sans-serif);font-feature-settings:normal;font-variation-settings:normal}p{margin:var(--dyte-space-0, 0px);padding:var(--dyte-space-0, 0px)}:host{position:relative;display:flex;height:var(--dyte-space-14, 56px);align-items:center;justify-content:space-between;cursor:pointer;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}:host dyte-avatar{height:var(--dyte-space-8, 32px);width:var(--dyte-space-8, 32px);font-size:14px}.left{display:flex;align-items:center}.left>*{margin-right:var(--dyte-space-2, 8px)}.left>*:last-child{margin-right:var(--dyte-space-0, 0px)}.right{display:flex;align-items:center;justify-content:flex-end}.right>*{margin-left:var(--dyte-space-2, 8px)}.right>*:first-child{margin-left:var(--dyte-space-0, 0px)}.name{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}dyte-icon{height:var(--dyte-space-6, 24px);width:var(--dyte-space-6, 24px)}dyte-icon.red{--tw-text-opacity:1;color:rgba(var(--dyte-colors-danger, 255 45 45) / var(--tw-text-opacity))}dyte-icon.more{cursor:pointer}.menu{position:relative;display:inline-block;color:rgb(var(--dyte-colors-text-1000, 255 255 255))}#menu-list{position:absolute;z-index:20}"}}]);